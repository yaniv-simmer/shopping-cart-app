{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./auth.service\";\nexport class CartService {\n  constructor(authService) {\n    this.authService = authService;\n    this.cartItems = [];\n    this.loadCart();\n  }\n  getCartKey() {\n    const user = this.authService.getCurrentUser();\n    return `shoppingCart_${user.email}`;\n  }\n  loadCart() {\n    const cartKey = this.getCartKey();\n    const savedCart = localStorage.getItem(cartKey);\n    if (savedCart) {\n      this.cartItems = JSON.parse(savedCart);\n    }\n  }\n  updateLocalStorage() {\n    const cartKey = this.getCartKey();\n    localStorage.setItem(cartKey, JSON.stringify(this.cartItems));\n  }\n  getCartItems() {\n    return this.cartItems;\n  }\n  addToCart(product) {\n    this.cartItems.push(product);\n    this.updateLocalStorage();\n  }\n  removeFromCart(index) {\n    this.cartItems.splice(index, 1);\n    this.updateLocalStorage();\n  }\n  clearCart() {\n    this.cartItems = [];\n    this.updateLocalStorage();\n  }\n  static {\n    this.ɵfac = function CartService_Factory(t) {\n      return new (t || CartService)(i0.ɵɵinject(i1.AuthService));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: CartService,\n      factory: CartService.ɵfac\n    });\n  }\n}","map":{"version":3,"names":["CartService","constructor","authService","cartItems","loadCart","getCartKey","user","getCurrentUser","email","cartKey","savedCart","localStorage","getItem","JSON","parse","updateLocalStorage","setItem","stringify","getCartItems","addToCart","product","push","removeFromCart","index","splice","clearCart","i0","ɵɵinject","i1","AuthService","factory","ɵfac"],"sources":["/mnt/c/Users/simme/Desktop/Academic/job_search/BMC_ran_ziv/shopping-cart-app/shopping-cart/src/app/core/services/cart.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { AuthService } from './auth.service';\r\n\r\n@Injectable()\r\nexport class CartService {\r\n  private cartItems: any[] = [];\r\n\r\n  constructor(private authService: AuthService) {\r\n    this.loadCart();\r\n  }\r\n\r\n  private getCartKey(): string {\r\n    const user = this.authService.getCurrentUser();\r\n    return `shoppingCart_${user.email}`;\r\n  }\r\n  \r\n  private loadCart(): void {\r\n    const cartKey = this.getCartKey();\r\n    const savedCart = localStorage.getItem(cartKey);\r\n    if (savedCart) {\r\n      this.cartItems = JSON.parse(savedCart);\r\n    }\r\n  }\r\n\r\n  private updateLocalStorage(): void {\r\n    const cartKey = this.getCartKey();\r\n    localStorage.setItem(cartKey, JSON.stringify(this.cartItems));\r\n  }\r\n\r\n  getCartItems(): any[] {\r\n    return this.cartItems;\r\n  }\r\n\r\n  addToCart(product: any): void {\r\n    this.cartItems.push(product);\r\n    this.updateLocalStorage();\r\n  }\r\n\r\n  removeFromCart(index: number): void {\r\n    this.cartItems.splice(index, 1);\r\n    this.updateLocalStorage();\r\n  }\r\n\r\n  clearCart(): void {\r\n    this.cartItems = [];\r\n    this.updateLocalStorage();\r\n  }\r\n}"],"mappings":";;AAIA,OAAM,MAAOA,WAAW;EAGtBC,YAAoBC,WAAwB;IAAxB,KAAAA,WAAW,GAAXA,WAAW;IAFvB,KAAAC,SAAS,GAAU,EAAE;IAG3B,IAAI,CAACC,QAAQ,EAAE;EACjB;EAEQC,UAAUA,CAAA;IAChB,MAAMC,IAAI,GAAG,IAAI,CAACJ,WAAW,CAACK,cAAc,EAAE;IAC9C,OAAO,gBAAgBD,IAAI,CAACE,KAAK,EAAE;EACrC;EAEQJ,QAAQA,CAAA;IACd,MAAMK,OAAO,GAAG,IAAI,CAACJ,UAAU,EAAE;IACjC,MAAMK,SAAS,GAAGC,YAAY,CAACC,OAAO,CAACH,OAAO,CAAC;IAC/C,IAAIC,SAAS,EAAE;MACb,IAAI,CAACP,SAAS,GAAGU,IAAI,CAACC,KAAK,CAACJ,SAAS,CAAC;;EAE1C;EAEQK,kBAAkBA,CAAA;IACxB,MAAMN,OAAO,GAAG,IAAI,CAACJ,UAAU,EAAE;IACjCM,YAAY,CAACK,OAAO,CAACP,OAAO,EAAEI,IAAI,CAACI,SAAS,CAAC,IAAI,CAACd,SAAS,CAAC,CAAC;EAC/D;EAEAe,YAAYA,CAAA;IACV,OAAO,IAAI,CAACf,SAAS;EACvB;EAEAgB,SAASA,CAACC,OAAY;IACpB,IAAI,CAACjB,SAAS,CAACkB,IAAI,CAACD,OAAO,CAAC;IAC5B,IAAI,CAACL,kBAAkB,EAAE;EAC3B;EAEAO,cAAcA,CAACC,KAAa;IAC1B,IAAI,CAACpB,SAAS,CAACqB,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC;IAC/B,IAAI,CAACR,kBAAkB,EAAE;EAC3B;EAEAU,SAASA,CAAA;IACP,IAAI,CAACtB,SAAS,GAAG,EAAE;IACnB,IAAI,CAACY,kBAAkB,EAAE;EAC3B;;;uBA1CWf,WAAW,EAAA0B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,WAAA;IAAA;EAAA;;;aAAX7B,WAAW;MAAA8B,OAAA,EAAX9B,WAAW,CAAA+B;IAAA;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}